{"ast":null,"code":"import { useEffect } from 'react';\nimport { getEvents } from '@puzzlehq/sdk-core';\nimport { useInjectedRequestQuery } from './utils/useRequest.js';\nimport { useWalletStore } from '../store.js';\nimport { useDebounce } from 'use-debounce';\nimport useInjectedSubscriptions from './utils/useInjectedSubscription.js';\nimport { useIsConnected } from '../provider/PuzzleWalletProvider.js';\nexport const useEvents = ({\n  filter,\n  page,\n  address,\n  network\n}) => {\n  const {\n    isConnected\n  } = useIsConnected();\n  const [account] = useWalletStore(state => [state.account]);\n  if (filter?.programId === '') {\n    filter.programId = undefined;\n  }\n  const [debouncedFilter] = useDebounce(filter, 500);\n  const {\n    refetch,\n    data,\n    error: _error,\n    isLoading: loading\n  } = useInjectedRequestQuery({\n    queryKey: ['useEvents', account?.address, JSON.stringify(debouncedFilter), page],\n    enabled: !!isConnected,\n    fetchFunction: async () => {\n      return await getEvents({\n        filter,\n        page,\n        address,\n        network\n      });\n    }\n  });\n  // listen for injected wallet-originating account updates\n  useInjectedSubscriptions({\n    configs: [{\n      subscriptionName: 'onSelectedAccountSynced',\n      condition: () => true,\n      onData: () => isConnected && refetch(),\n      onError: e => {\n        console.error(e);\n      },\n      dependencies: [isConnected]\n    }]\n  });\n  // send initial events request\n  const readyToRequest = !!isConnected && !!account;\n  useEffect(() => {\n    if (readyToRequest && !loading) {\n      refetch();\n    }\n  }, [readyToRequest]);\n  const fetchPage = () => {\n    if (readyToRequest && !loading) {\n      refetch();\n    }\n  };\n  const error = _error?.message ?? undefined;\n  const response = data;\n  const events = response?.events;\n  const pageCount = response?.pageCount ?? 0;\n  return {\n    fetchPage,\n    events,\n    error,\n    loading,\n    page,\n    pageCount\n  };\n};","map":{"version":3,"names":["useEffect","getEvents","useInjectedRequestQuery","useWalletStore","useDebounce","useInjectedSubscriptions","useIsConnected","useEvents","filter","page","address","network","isConnected","account","state","programId","undefined","debouncedFilter","refetch","data","error","_error","isLoading","loading","queryKey","JSON","stringify","enabled","fetchFunction","configs","subscriptionName","condition","onData","onError","e","console","dependencies","readyToRequest","fetchPage","message","response","events","pageCount"],"sources":["/Users/erdemrencbereli/Desktop/erdemrenc_ethdenver_aleo/aleo_dapp/node_modules/@puzzlehq/sdk/dist/src/hooks/useEvents.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { getEvents, } from '@puzzlehq/sdk-core';\nimport { useInjectedRequestQuery } from './utils/useRequest.js';\nimport { useWalletStore } from '../store.js';\nimport { useDebounce } from 'use-debounce';\nimport useInjectedSubscriptions from './utils/useInjectedSubscription.js';\nimport { useIsConnected } from '../provider/PuzzleWalletProvider.js';\nexport const useEvents = ({ filter, page, address, network, }) => {\n    const { isConnected } = useIsConnected();\n    const [account] = useWalletStore((state) => [state.account]);\n    if (filter?.programId === '') {\n        filter.programId = undefined;\n    }\n    const [debouncedFilter] = useDebounce(filter, 500);\n    const { refetch, data, error: _error, isLoading: loading, } = useInjectedRequestQuery({\n        queryKey: [\n            'useEvents',\n            account?.address,\n            JSON.stringify(debouncedFilter),\n            page,\n        ],\n        enabled: !!isConnected,\n        fetchFunction: async () => {\n            return await getEvents({\n                filter,\n                page,\n                address,\n                network,\n            });\n        },\n    });\n    // listen for injected wallet-originating account updates\n    useInjectedSubscriptions({\n        configs: [\n            {\n                subscriptionName: 'onSelectedAccountSynced',\n                condition: () => true,\n                onData: () => isConnected && refetch(),\n                onError: (e) => {\n                    console.error(e);\n                },\n                dependencies: [isConnected],\n            },\n        ],\n    });\n    // send initial events request\n    const readyToRequest = !!isConnected && !!account;\n    useEffect(() => {\n        if (readyToRequest && !loading) {\n            refetch();\n        }\n    }, [readyToRequest]);\n    const fetchPage = () => {\n        if (readyToRequest && !loading) {\n            refetch();\n        }\n    };\n    const error = _error?.message ?? undefined;\n    const response = data;\n    const events = response?.events;\n    const pageCount = response?.pageCount ?? 0;\n    return { fetchPage, events, error, loading, page, pageCount };\n};\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,SAAS,QAAS,oBAAoB;AAC/C,SAASC,uBAAuB,QAAQ,uBAAuB;AAC/D,SAASC,cAAc,QAAQ,aAAa;AAC5C,SAASC,WAAW,QAAQ,cAAc;AAC1C,OAAOC,wBAAwB,MAAM,oCAAoC;AACzE,SAASC,cAAc,QAAQ,qCAAqC;AACpE,OAAO,MAAMC,SAAS,GAAGA,CAAC;EAAEC,MAAM;EAAEC,IAAI;EAAEC,OAAO;EAAEC;AAAS,CAAC,KAAK;EAC9D,MAAM;IAAEC;EAAY,CAAC,GAAGN,cAAc,CAAC,CAAC;EACxC,MAAM,CAACO,OAAO,CAAC,GAAGV,cAAc,CAAEW,KAAK,IAAK,CAACA,KAAK,CAACD,OAAO,CAAC,CAAC;EAC5D,IAAIL,MAAM,EAAEO,SAAS,KAAK,EAAE,EAAE;IAC1BP,MAAM,CAACO,SAAS,GAAGC,SAAS;EAChC;EACA,MAAM,CAACC,eAAe,CAAC,GAAGb,WAAW,CAACI,MAAM,EAAE,GAAG,CAAC;EAClD,MAAM;IAAEU,OAAO;IAAEC,IAAI;IAAEC,KAAK,EAAEC,MAAM;IAAEC,SAAS,EAAEC;EAAS,CAAC,GAAGrB,uBAAuB,CAAC;IAClFsB,QAAQ,EAAE,CACN,WAAW,EACXX,OAAO,EAAEH,OAAO,EAChBe,IAAI,CAACC,SAAS,CAACT,eAAe,CAAC,EAC/BR,IAAI,CACP;IACDkB,OAAO,EAAE,CAAC,CAACf,WAAW;IACtBgB,aAAa,EAAE,MAAAA,CAAA,KAAY;MACvB,OAAO,MAAM3B,SAAS,CAAC;QACnBO,MAAM;QACNC,IAAI;QACJC,OAAO;QACPC;MACJ,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;EACF;EACAN,wBAAwB,CAAC;IACrBwB,OAAO,EAAE,CACL;MACIC,gBAAgB,EAAE,yBAAyB;MAC3CC,SAAS,EAAEA,CAAA,KAAM,IAAI;MACrBC,MAAM,EAAEA,CAAA,KAAMpB,WAAW,IAAIM,OAAO,CAAC,CAAC;MACtCe,OAAO,EAAGC,CAAC,IAAK;QACZC,OAAO,CAACf,KAAK,CAACc,CAAC,CAAC;MACpB,CAAC;MACDE,YAAY,EAAE,CAACxB,WAAW;IAC9B,CAAC;EAET,CAAC,CAAC;EACF;EACA,MAAMyB,cAAc,GAAG,CAAC,CAACzB,WAAW,IAAI,CAAC,CAACC,OAAO;EACjDb,SAAS,CAAC,MAAM;IACZ,IAAIqC,cAAc,IAAI,CAACd,OAAO,EAAE;MAC5BL,OAAO,CAAC,CAAC;IACb;EACJ,CAAC,EAAE,CAACmB,cAAc,CAAC,CAAC;EACpB,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACpB,IAAID,cAAc,IAAI,CAACd,OAAO,EAAE;MAC5BL,OAAO,CAAC,CAAC;IACb;EACJ,CAAC;EACD,MAAME,KAAK,GAAGC,MAAM,EAAEkB,OAAO,IAAIvB,SAAS;EAC1C,MAAMwB,QAAQ,GAAGrB,IAAI;EACrB,MAAMsB,MAAM,GAAGD,QAAQ,EAAEC,MAAM;EAC/B,MAAMC,SAAS,GAAGF,QAAQ,EAAEE,SAAS,IAAI,CAAC;EAC1C,OAAO;IAAEJ,SAAS;IAAEG,MAAM;IAAErB,KAAK;IAAEG,OAAO;IAAEd,IAAI;IAAEiC;EAAU,CAAC;AACjE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}